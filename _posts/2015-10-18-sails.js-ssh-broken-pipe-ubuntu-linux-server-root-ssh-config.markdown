---
layout:     post
title:      "Broken Pipe"
subtitle:   "Ubuntu Linux Server"
date:       2015-10-18 14:00:44
author:     "Lucas Gatsas"
header-img: "img/3d-abstract_widewallpaper_misty-clouds-over-mountains_57245.jpg"
---

<h2 class="section-heading">Broken Pipe - Write failed: Broken pipe
</h2>



<br><br><br> 
Linux System

<code> cd /etc/ssh/ </code>  (in das SSH Verzeichnis wechseln)
<code> vim sshd_config </code>  (sshd_config bearbeiten)
Fügen Sie folgende Zeilen in die sshd_config Datei hinzu
<br>
Die Meldung „write failed: broken pipe“ tritt häufig während einer aktiven SSH Sitzung auf. Dafür verantwortlich ist eine zu lange Antwortzeit vom Server, der ein Debian Linux Server oder auch genau so ein MAC OS X Rechner sein kann. Das Problem eines Sitzungsabbruches mit write failed: broken pipe ist bei uns in der Verwendung mit dem Tar-Befehl beim anfertigen eines Backups zu einem entfernten MAC OS X Servers aufgetreten.

<strong> Warum „write failed broken pipe“? </strong> 
Braucht der Server zu lange um eine Antwort zu senden wird die TCP Verbindung geschlossen und eine neue Anmeldung ist erforderlich. Wird die Verbindung während eines Datentransfers geschlossen, so kommt es zu dem Fehler write failed:broken pipe. Dieses Problem kann während eines tar oder rsync Kommandos auf allen Unix- und somit auch auf allen MAC OS X Systemen auftreten.


<br> 
<br>


{% highlight ruby %}

ServerAliveInterval 30
ServerAliveCountMax 120


{% endhighlight %}

<br> 

{% highlight ruby %}

debug: :: Sun Oct 18 2015 12:05:54 GMT-0400 (EDT)

debug: Environment : development
debug: Port        : 80
debug: --------------------------------------------------------
Write failed: Broken pipe
Space-O-Mac-Pro:~ cypo$ ssh root@xxx.xxx.xxx.xx


root@xxx.xxx.xxx.xx's password: 

{% endhighlight %}





<strong> MAC OS X </strong> 

Zur Sicherheit bearbeiten Sie gleich 2 config Dateien auf dem MAC. Die allgemeine SSH Config Datei und die SSH Config Datei des Users.

Hier liegen die beiden SSH Konfigurationsdateien

<code>cd ~ </code> (ins Homeverzeichnis des aktuellen Benutzers wechseln. Mit diesem Bentzer müssen wir uns später auch per SSH anmelden)

<code> 
cd .ssh </code> 
(und) <code>  cd /etc/ </code> 
Ist dies Datei sshd_config nicht vorhanden legen Sie die Datei mit

<code> touch sshd_config </code>

neu an.

Bearbeiten Sie die Datei sshd_config nun mit

vim sshd_config
und fügen Sie folgende Zeilen ein:

Host *
ServerAliveInterval 30
ServerAliveCountMax 120
Nun sollte das write failed, broken pipe Problem unter Mac OSX nicht mehr vorkommen.

SSH Verbindung bricht immer noch ab?
Versuchen Sie folgende Einstellungen:

TCPKeepAlive yes
sudo sysctl -w net.inet.tcp.always_keepalive=9999 (Damit setzen wir die Lebensdauer von TCP Verbindungen höher. hat bei uns geholfen!)





{% highlight ruby %}

 npm clear cache
 npm rebuild
 sudo sails lift

{% endhighlight %}




Link: <a href="http://askubuntu.com/questions/127369/how-to-prevent-write-failed-broken-pipe-on-ssh-connection" target="_blank"> Linux Ubuntu Broken Pipe </a> 
Link: <a href="https://github.com/balderdashy/sails/issues/3292" target="_blank"> Github Issues 3292</a> 



<blockquote>
"Port Running on Linux Ubuntu Servers"
</blockquote>

